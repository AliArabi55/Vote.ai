# ๐ง ุฏููู ุชูุนูู pgvector ุนูู Azure PostgreSQL

## โ๏ธ ุงููุดููุฉ ุงูุญุงููุฉ

```
Error: type "vector" does not exist
```

**ุงูุณุจุจ**: ุงูุชุฏุงุฏ pgvector ุบูุฑ ูููุนูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช Azure PostgreSQL.

---

## โ ุงูุญู: ุชูุนูู pgvector ูู Azure Portal

### **ุงูุฎุทูุฉ 1๏ธโฃ: ูุชุญ Azure Portal**

1. ุงูุชุญ ูุชุตูุญ ุงูุฅูุชุฑูุช
2. ุงุฐูุจ ุฅูู: https://portal.azure.com
3. ุณุฌู ุงูุฏุฎูู ุจุญุณุงุจู

---

### **ุงูุฎุทูุฉ 2๏ธโฃ: ุงููุตูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

1. ูู ุดุฑูุท ุงูุจุญุซ ุงูุนููู ุงูุชุจ: `voteai`
2. ุงุฎุชุฑ **voteai (Azure Database for PostgreSQL flexible server)**
3. ุฃู ูู ุงููุงุฆูุฉ ุงููุณุฑู:
   - **All resources** โ ุงุจุญุซ ุนู `voteai`

---

### **ุงูุฎุทูุฉ 3๏ธโฃ: ูุชุญ ุฅุนุฏุงุฏุงุช Extensions**

ูู ุงููุงุฆูุฉ ุงููุณุฑู ููู PostgreSQL server:

1. ุงูุชูู ุฅูู ูุณู **Settings**
2. ุงุถุบุท ุนูู **Server parameters**
3. ูู ูุฑุจุน ุงูุจุญุซ ุงูุชุจ: `azure.extensions`

---

### **ุงูุฎุทูุฉ 4๏ธโฃ: ุฅุถุงูุฉ pgvector ููุงูุชุฏุงุฏุงุช ุงููุณููุญุฉ**

1. ุณุชุฌุฏ ุฎูุงุฑ ุงุณูู: **`azure.extensions`**
2. ุงุถุบุท ุนูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
3. ุงุจุญุซ ุนู **`VECTOR`** ุฃู **`pgvector`**
4. ุถุน ุนูุงูุฉ โ ุจุฌุงูุจ **VECTOR**
5. ุงุถุบุท **Save** ูู ุงูุฃุนูู

**โฑ๏ธ ุงูุงูุชุธุงุฑ**: ูุฏ ูุณุชุบุฑู ุงูุญูุธ **2-5 ุฏูุงุฆู** ูุณูุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู.

---

### **ุงูุฎุทูุฉ 5๏ธโฃ: ุชูุนูู ุงูุงูุชุฏุงุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

ุจุนุฏ ุญูุธ ุงูุฅุนุฏุงุฏุงุชุ ูุญุชุงุฌ ูุชูุนูู ุงูุงูุชุฏุงุฏ:

#### **ุงูุทุฑููุฉ 1: ูู Azure Cloud Shell** (ุงูุฃุณูู)

1. ูู Azure Portalุ ุงุถุบุท ุนูู ุฃููููุฉ **Cloud Shell** (>_) ูู ุงูุดุฑูุท ุงูุนููู
2. ุงุฎุชุฑ **Bash**
3. ุดุบู ุงูุฃูุงูุฑ ุงูุชุงููุฉ:

```bash
# ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
psql "host=voteai.postgres.database.azure.com port=5432 dbname=postgres user=voteadmin password=YOUR_PASSWORD sslmode=require"

# ุชูุนูู pgvector
CREATE EXTENSION IF NOT EXISTS vector;

# ุงูุชุญูู ูู ุงูุชูุนูู
\dx

# ุงูุฎุฑูุฌ
\q
```

**ููุงุญุธุฉ**: ุฅุฐุง ุธูุฑุช ุฑุณุงูุฉ ุฎุทุฃ ุฃู psql ุบูุฑ ูุซุจุชุ ุงุณุชุฎุฏู ุงูุทุฑููุฉ 2.

---

#### **ุงูุทุฑููุฉ 2: ูู ุจุฑูุงูุฌ Python** (ููุตู ุจูุง)

ุณุฃููู ุจุฅูุดุงุก ุณูุฑูุจุช Python ูุชูุนูู ุงูุงูุชุฏุงุฏ ุชููุงุฆูุงู.

ุดุบู ุงูุฃูุฑ ุงูุชุงูู ูู PowerShell:

```powershell
cd backend
.\venv\Scripts\Activate.ps1
python scripts\enable_pgvector.py
```

---

### **ุงูุฎุทูุฉ 6๏ธโฃ: ุงูุชุญูู ูู ุงูุชูุนูู**

ุจุนุฏ ุชูุนูู ุงูุงูุชุฏุงุฏุ ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู:

```powershell
python scripts\init_db.py
```

---

## ๐ ููุฎุต ุงูุฎุทูุงุช ุงููุทููุจุฉ ุนูู Azure

| ุงูุฎุทูุฉ | ุงูุฅุฌุฑุงุก | ุงููููุน ูู Azure Portal |
|--------|---------|------------------------|
| 1๏ธโฃ | ูุชุญ PostgreSQL Server | ุงูุจุญุซ ุนู `voteai` |
| 2๏ธโฃ | ูุชุญ Server Parameters | Settings โ Server parameters |
| 3๏ธโฃ | ุงูุจุญุซ ุนู azure.extensions | ูุฑุจุน ุงูุจุญุซ ูู ุงูุฃุนูู |
| 4๏ธโฃ | ุชูุนูู VECTOR | ุถุน ุนูุงูุฉ โ ูุงุถุบุท Save |
| 5๏ธโฃ | ุงูุชุธุฑ ุฅุนุงุฏุฉ ุงูุชุดุบูู | 2-5 ุฏูุงุฆู |
| 6๏ธโฃ | ุดุบู ุณูุฑูุจุช enable_pgvector.py | ูู PowerShell ูุญููุงู |

---

## ๐ฏ ูุง ุณุฃูุนูู ุงูุขู

ุณุฃููู ุจุฅูุดุงุก ุณูุฑูุจุช Python ูุชูุนูู pgvector extension ุชููุงุฆูุงู.

ุจุนุฏ ุฃู ุชูููู ุงูุฎุทูุงุช 1-5 ุนูู Azure Portalุ ุดุบู:

```powershell
python scripts\enable_pgvector.py
```

---

## ๐ ุงูุชุญูู ูู ูุฌุงุญ ุงูุชูุนูู

ุจุนุฏ ุชุดุบูู `enable_pgvector.py`ุ ูุฌุจ ุฃู ุชุฑู:

```
โ pgvector extension enabled successfully!
```

ุซู ุดุบู:

```powershell
python scripts\init_db.py
```

ูุฌุจ ุฃู ุชุฑู:

```
โ Database tables created successfully!
```

---

## โ ุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุชู ุฃู ูุดููุฉ:

1. **ุชุฃูุฏ ุฃู azure.extensions ูุญุชูู ุนูู VECTOR** (ุฎุทูุฉ 4)
2. **ุงูุชุธุฑ ุฅุนุงุฏุฉ ุงูุชุดุบูู ุชูุชูู** (ุฎุทูุฉ 5)
3. **ุชุญูู ูู ุตุญุฉ DATABASE_URL ูู .env**
4. **ุชุฃูุฏ ุฃู IP Address ูุณููุญ ูู Firewall**

---

**๐ ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 17 ููููุจุฑ 2025  
**โ ุงูุญุงูุฉ**: ูู ุงูุชุธุงุฑ ุชูุนูู pgvector ุนูู Azure
